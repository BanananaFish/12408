# 指令系统

[TOC]

## 指令格式

1. 指令长度可以大于、小于、等于机器字长；若指令系统指令长度全相等，称为定长指令字结构，反正有变长
2. ==扩展操作码==：
   1. 不允许短码是长码的前缀，例如110不能作为1101的扩展码前缀
   2. 使用频率高的指令分配短操作码，减少指令译码和分析的时间



## 指令的寻址方式

1. 寻址特征区分了各种寻址的方式：在间址中，主存字第一位为1表示取出的不为最终真实地址，为多次间址，第一位为0是，则表示是真实地址
2. **JMP A**：CPU从存储器中取出1B时，PC++；例如，==转移指令==地址为X，占2B，取出该指令后，PC+2，执行完后，跳转到X+2+A
3. 基址寻址的BR寄存器既可以用专用寄存器，也可以用通用寄存器；变址寻址只能使用专用寄存器
4. 基址寻址与变址寻址方式的区别：
   1. 基址面向OS，在执行过程中不可变；用于扩大程序范围，方便多道程序设计，基址由OS控制，但偏移量A位数较短
   2. 变址面向用户，IX寄存器可由用户改变，能在执行中改变；用于实现数组操作/循环程序，IX能表示整个存储空间

5. 堆栈寻址：由SP（堆栈指针）给出地址；硬堆栈由寄存器实现，软堆栈由主存中特定区域实现，后者常见



## CISC/RISC

1. CISC：不定长，寻址方式多，微程序控制（复杂程序难以用硬布线实现），难以优化编译
2. RISC：定长，只有LOAD/STORE访存，其他指令只操作寄存器，CPU中通用寄存器很多，**一定采用流水线**，大部分指令花一个时钟周期



## 零碎重点

1. 中断隐指令：不是指令系统中的指令，是由硬件实现的
2. 立即数：用于赋给寄存器初始值，例如`MOV AL, 0x04`，将立即数寄存器中的`0x04`赋给AL寄存器
3. 一次无条件跳转指令的指令周期内，PC被修改两次：读入指令后+1，跳转后再修改一次

